<page-meta page-style="{{theme == 'light'? 'background: linear-gradient(#FFDE86, #EFA1EE, #73E8F0);color:#3e3152;': 'background: linear-gradient(#320532,#3C0F0F);color:#aa97c2;'}}">
  <!-- 动态修改title样式,包括文本内容与颜色 -->
  <navigation-bar title="{{ Curriculum.name }}" front-color="{{ theme == 'light' ? '#3e3152' : '#aa97c2' }}" background-color="{{ theme == 'light' ? '#FFDE86' : '#320532' }}" />
  <!-- 页面内容 -->
  <view class="index vh-100 overflow-scroll noScrollBar">
    <view class="mb-4">
      <!-- 课表本体 -->
      <view id="Curriculum" class="d-flex">
        <!-- 左侧课程时间，分为顶栏，上午，下午，晚上 -->
        <view class="me-1 flex-shrink-0">
          <!-- 顶部留空 -->
          <view style="height: 2.305rem;" class="mb-1"></view>
          <!-- 上午 -->
          <view class="mb-1 {{theme == 'light' ? 'bg-light' : 'bg-dark'}} bg-opacity-50 rounded px-1 overflow-hidden">
            <view wx:for="{{ Curriculum.hour }}" wx:key="index" wx:if="{{ index < Curriculum.classInfo.morningCourses }}" class="itemMarginY d-flex flex-column align-items-center justify-content-center" style="height: var(--itemHeight);;">
              <text style="height: 1rem">{{ index + 1 }}</text>
              <text class="fs-10 opacity-50" style="height: 9.3px">{{
                item[0]
                }}</text>
              <text class="fs-10 opacity-50" style="height: 9.3px">{{
                item[1]
                }}</text>
            </view>
          </view>
          <!-- 下午 -->
          <view class="mb-1 {{theme == 'light' ? 'bg-light' : 'bg-dark'}} bg-opacity-50 rounded px-1 overflow-hidden">
            <view wx:for="{{ Curriculum.hour }}" wx:key="index" wx:if="{{Curriculum.classInfo.morningCourses <= index && index < Curriculum.classInfo.morningCourses + Curriculum.classInfo.afternoonCourses}}" class="itemMarginY d-flex flex-column align-items-center justify-content-center" style="height: var(--itemHeight);;">
              <text style="height: 1rem">{{ index + 1 }}</text>
              <text class="fs-10 opacity-50" style="height: 9.3px">{{
                item[0]
                }}</text>
              <text class="fs-10 opacity-50" style="height: 9.3px">{{
                item[1]
                }}</text>
            </view>
          </view>
          <!-- 晚上 -->
          <view class="mb-1 {{theme == 'light' ? 'bg-light' : 'bg-dark'}} bg-opacity-50 rounded px-1 overflow-hidden">
            <view wx:for="{{ Curriculum.hour }}" wx:key="index" wx:if="{{Curriculum.classInfo.morningCourses + Curriculum.classInfo.afternoonCourses <= index && index < Curriculum.classInfo.morningCourses + Curriculum.classInfo.afternoonCourses + Curriculum.classInfo.nightCourses}}" class="itemMarginY d-flex flex-column align-items-center justify-content-center" style="height: var(--itemHeight);;">
              <view style="height: 1rem">{{ index + 1 }}</view>
              <view class="fs-10 opacity-50" style="height: 9.3px">{{
                item[0]
                }}</view>
              <view class="fs-10 opacity-50" style="height: 9.3px">{{
                item[1]
                }}</view>
            </view>
          </view>
        </view>
        <!-- 右侧课程 -->
        <view class="flex-grow-1 overflow-hidden">
          <!-- 星期数 -->
          <view class="d-flex justify-content-around {{theme == 'light' ? 'bg-light' : 'bg-dark'}} bg-opacity-50 rounded mb-1">
            <view wx:for="{{ ['一', '二', '三', '四', '五', '六', '日'] }}" wx:key="index" style="flex:1;" class="itemMarginX text-center py-2  {{week - 1 == index || (index == 6 && week == 0) ? 'text-danger' : ''}}">周{{ item }}</view>
          </view>
          <!-- 上午课程 -->
          <view class="d-flex {{theme == 'light' ? 'bg-light' : 'bg-dark'}} bg-opacity-50 rounded">
            <!-- 每一列(周几) -->
            <view wx:for="{{ Curriculum.arrangement }}" wx:for-index="day" wx:key="day" style="flex:1" class="itemMarginX">
              <!-- 每一节课程的item -->
              <view wx:for="{{ item.morningCourses }}" wx:for-item="j" wx:key="index" style="height: var(--itemHeight);color:{{Curriculum.Course[j.Course].textColor}};background: rgba({{Curriculum.Course[j.Course].courseColor}},0.3);" class="itemMarginY w-100 overflow-hidden rounded text-center d-flex flex-column justify-content-center position-relative" data-course="morningCourses" data-day='{{day}}' data-index='{{index}}' bindtap="addCourse">
                <view class="fs-9">{{j.Course}}</view>
                <view class="fs-10 fs-body opacity-50">{{Curriculum.Course[j.Course].teacher}}</view>
                <view class="fs-10 fs-body opacity-50">{{Curriculum.Course[j.Course].classRoom}}</view>
                <!-- 勾选框 -->
                <view hidden="{{!Editing}}" class="position-absolute end-0 bottom-0 border {{theme=='light'?'border-pink bg-pink':'border-purple bg-purple'}} border-opacity-50 {{j.check?'':'bg-opacity-10'}} rounded" style="width:10px;height: 10px;margin: 0 0.5px 0.5px 0;"></view>
              </view>
            </view>
          </view>
          <!-- 下午 -->
          <!-- 晚上 -->
        </view>
      </view>
      <!-- 下方操作栏 -->
      <view wx:if="{{!Editing}}" class="d-flex">
        <view class="flex-grow-1 mx-2 bg-opacity-50 {{theme == 'light' ? 'bg-light' : 'bg-dark'}} rounded py-1 text-center" bindtap="changeEditing">
          <view class="iconfont icon-bianji"></view>选课编辑
        </view>
        <view class="flex-grow-1 me-2 bg-opacity-50 {{theme == 'light' ? 'bg-light' : 'bg-dark'}} rounded py-1 text-center" bindtap="toClassSetting">
          <view class="iconfont icon-shezhi"></view>课表设置
        </view>
        <view class="flex-grow-1 me-2 bg-opacity-50 {{theme == 'light' ? 'bg-light' : 'bg-dark'}} rounded py-1 text-center" bindtap="toTimeSetting">
          <view class="iconfont icon-shijian"></view>上课时段
        </view>
        <view class="flex-grow-1 me-2 bg-opacity-50 {{theme == 'light' ? 'bg-light' : 'bg-dark'}} rounded py-1 text-center" bindtap="toChangeCurriculum">
          <view class="iconfont icon-qiehuan"></view>切换课表
        </view>
      </view>
      <!-- 课表编辑栏 -->
      <view wx:if="{{Editing}}" class="d-flex">
        <view class="flex-grow-1 mx-2 bg-opacity-50 {{theme == 'light' ? 'bg-light' : 'bg-dark'}} rounded py-1 text-center">
          <view class="iconfont icon-bianji"></view>编辑所选
        </view>
        <view class="flex-grow-1 me-2 bg-opacity-50 {{theme == 'light' ? 'bg-light' : 'bg-dark'}} rounded py-1 text-center">
          <view class="iconfont icon-shanchu"></view>删除所选
        </view>
        <view class="flex-grow-1 me-2 bg-opacity-50 {{theme == 'light' ? 'bg-light' : 'bg-dark'}} rounded py-1 text-center" bindtap="toAddCourse">
          <view class="iconfont icon-jia"></view>添加课程
        </view>
        <view class="flex-grow-1 me-2 bg-opacity-50 {{theme == 'light' ? 'bg-light' : 'bg-dark'}} rounded py-1 text-center" bindtap="finishEditing">
          <view class="iconfont icon-wancheng"></view>完成编辑
        </view>
      </view>
      <!-- 关于我们 -->
    </view>
  </view>
</page-meta>